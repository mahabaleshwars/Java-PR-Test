name: JDK 17 (Oracle distribution) with Maven Toolchain Vendor/ID
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
  workflow_dispatch:
  
jobs:
  oracle-jdk-17:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout (only needed if build sources are required later)
        uses: actions/checkout@v4

      # No manual download needed for a standard supported JDK 17 distribution.
      # Using the 'oracle' distribution directly instead of jdkfile.
      - name: Setup Java (Oracle JDK 17) with custom vendor for Maven Toolchain
        uses: mahabaleshwars/setup-java@fix/graalvm-api-rate-limit
        with:
          distribution: oracle
          java-version: '17'
          # mvn-toolchain-vendor will set the vendor entry in the generated toolchain.
          mvn-toolchain-vendor: 'Oracle'
          # (Optional) If you want to control the toolchain id explicitly, uncomment below:
          # mvn-toolchain-id: 'Oracle_17'

      - name: Show Java version
        run: java -version

      - name: Show generated Maven toolchains.xml
        run: |
          echo "----- toolchains.xml -----"
          cat ~/.m2/toolchains.xml || echo "No toolchains.xml found"
          echo "--------------------------"
